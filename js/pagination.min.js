!function(a){a.fn.blogPagination=function(t){var n=a.extend({inputStyle:"",inputPlaceholder:"Search...",pagination:!1,paginationClass:"blog_pagination_index",paginationClassActive:"blog_pagination_index_active",pagClosest:3,perPage:10,sortable:!0,searchable:!0,onInit:function(){},onUpdate:function(){},testing:!1},t),i=this;return this.settings=n,this.tableUpdate=function(t){if(t.blogPagination.matches=0,a(t).find("tbody tr").each(function(){var i=0,o=!0,e=!1;a(this).find("td").each(function(){n.globalSearch||!t.blogPagination.searchArr[i]||new RegExp(t.blogPagination.searchArr[i],"i").test(a(this).html())?!n.globalSearch||t.blogPagination.search&&!new RegExp(t.blogPagination.search,"i").test(a(this).html())||Array.isArray(n.globalSearchExcludeColumns)&&n.globalSearchExcludeColumns.includes(i+1)||(e=!0):o=!1,i++}),n.globalSearch&&e||!n.globalSearch&&o?(t.blogPagination.matches++,!n.pagination||t.blogPagination.matches>t.blogPagination.perPage*(t.blogPagination.page-1)&&t.blogPagination.matches<=t.blogPagination.perPage*t.blogPagination.page?a(this).show():a(this).hide()):a(this).hide()}),t.blogPagination.pages=Math.ceil(t.blogPagination.matches/t.blogPagination.perPage),n.pagination){var o=t.blogPagination.paginationElement?a(t.blogPagination.paginationElement):a(t).find(".pag");o.empty();for(var e=1;e<=t.blogPagination.pages;e++)if(1==e||e>t.blogPagination.page-(n.pagClosest+1)&&e<t.blogPagination.page+(n.pagClosest+1)||e==t.blogPagination.pages){var g=a("<a>",{html:e,"data-n":e,style:"margin:0.2em",class:n.paginationClass+" "+(e==t.blogPagination.page?n.paginationClassActive:"")}).css("cursor","pointer").bind("click",function(){t.blogPagination.page=a(this).data("n"),i.tableUpdate(t)});e==t.blogPagination.pages&&t.blogPagination.page<t.blogPagination.pages-n.pagClosest-1&&o.append(a("<span>...</span>")),o.append(g),1==e&&t.blogPagination.page>n.pagClosest+2&&o.append(a("<span>...</span>"))}}n.onUpdate.call(this,t)},this.reinit=function(t){a(this).each(function(){a(this).find("th a").contents().unwrap(),a(this).find("tr.fancySearchRow").remove()}),a(this).blogPagination(this.settings)},this.tableSort=function(t){if(void 0!==t.blogPagination.sortColumn&&t.blogPagination.sortColumn<t.blogPagination.nColumns){a(t).find("thead th div.sortArrow").each(function(){a(this).remove()});var n=a("<div>",{class:"sortArrow"}).css({margin:"0.1em",display:"inline-block",width:0,height:0,"border-left":"0.4em solid transparent","border-right":"0.4em solid transparent"});n.css(t.blogPagination.sortOrder>0?{"border-top":"0.4em solid #000"}:{"border-bottom":"0.4em solid #000"}),a(t).find("thead th a").eq(t.blogPagination.sortColumn).append(n);var i=a(t).find("tbody tr").toArray().sort(function(n,i){var o=a(n).find("td").eq(t.blogPagination.sortColumn).html(),e=a(i).find("td").eq(t.blogPagination.sortColumn).html();return"numeric"==t.blogPagination.sortAs[t.blogPagination.sortColumn]?t.blogPagination.sortOrder>0?parseFloat(o)-parseFloat(e):parseFloat(e)-parseFloat(o):o<e?-t.blogPagination.sortOrder:o>e?t.blogPagination.sortOrder:0});a(t).find("tbody").empty().append(i)}},this.each(function(){if("TABLE"!==a(this).prop("tagName"))return console.warn("blogPagination: Element is not a table."),!0;var t=this;if(t.blogPagination={nColumns:a(t).find("td").first().parent().find("td").length,nRows:a(this).find("tbody tr").length,perPage:n.perPage,page:1,pages:0,matches:0,searchArr:[],search:"",sortColumn:n.sortColumn,sortOrder:void 0===n.sortOrder?1:new RegExp("desc","i").test(n.sortOrder)||-1==n.sortOrder?-1:1,sortAs:[],paginationElement:n.paginationElement},0==a(t).find("tbody").length){var o=a(t).html();a(t).empty(),a(t).append("<tbody>").append(a(o))}if(0==a(t).find("thead").length&&a(t).prepend(a("<thead>")),n.sortable){var e=0;a(t).find("thead th").each(function(){t.blogPagination.sortAs.push("numeric"==a(this).data("sortas")?"numeric":"");var n=a(this).html(),o=a("<a>",{html:n,"data-n":e,class:""}).css("cursor","pointer").bind("click",function(){t.blogPagination.sortColumn==a(this).data("n")?t.blogPagination.sortOrder=-t.blogPagination.sortOrder:t.blogPagination.sortOrder=1,t.blogPagination.sortColumn=a(this).data("n"),i.tableSort(t),i.tableUpdate(t)});a(this).empty(),a(this).append(o),e++})}if(n.searchable){var g=a("<tr>").addClass("fancySearchRow");if(n.globalSearch){var l=a("<input>",{placeholder:n.inputPlaceholder,style:"width:100%;"+n.inputStyle}).bind("change paste keyup",function(){t.blogPagination.search=a(this).val(),t.blogPagination.page=1,i.tableUpdate(t)}),r=a("<th>",{style:"padding:2px;"}).attr("colspan",t.blogPagination.nColumns);a(l).appendTo(a(r)),a(r).appendTo(a(g))}else{e=0;a(t).find("td").first().parent().find("td").each(function(){t.blogPagination.searchArr.push("");var o=a("<input>",{"data-n":e,placeholder:n.inputPlaceholder,style:"width:100%;"+n.inputStyle}).bind("change paste keyup",function(){t.blogPagination.searchArr[a(this).data("n")]=a(this).val(),t.blogPagination.page=1,i.tableUpdate(t)}),l=a("<th>",{style:"padding:2px;"});a(o).appendTo(a(l)),a(l).appendTo(a(g)),e++})}g.appendTo(a(t).find("thead"))}i.tableSort(t),n.pagination&&!n.paginationElement&&(a(t).find("tfoot").remove(),a(t).append(a("<tfoot><tr></tr></tfoot>")),a(t).find("tfoot tr").append(a("<td class='pag'></td>",{}).attr("colspan",t.blogPagination.nColumns))),i.tableUpdate(t),n.onInit.call(this,t)}),this}}(jQuery);